
###################################################
# Extract - extract most common compression types #
###################################################
function extract() {
  local e=0 i c
  for i; do
    if [[ -f $i && -r $i ]]; then
        c=''
        case $i in
          *.7z)  c='7z x'       ;;
          *.Z)   c='uncompress' ;;
          *.bz2) c='bunzip2'    ;;
          *.exe) c='cabextract' ;;
          *.gz)  c='gunzip'     ;;
          *.rar) c='unrar x'    ;;
          *.xz)  c='unxz'       ;;
          *.zip) c='unzip'      ;;
          *)     echo "$0: cannot extract \`$i': Unrecognized file extension" >&2; e=1 ;;
        esac
        [[ $c ]] && command $c "$i"
    else
        echo "$0: cannot extract \`$i': File is unreadable" >&2; e=2
    fi
  done
  return $e
}

#######################################################
# git-findmerge: find merge commits containing this hash. #
#######################################################
function git-findmerge() {
  if [ -z "$1" ];
    then
      echo "findmerge needs a commit hash to find the commit merging to the current branch."
    else
      git log --merges --ancestry-path --oneline $1..origin | tail
  fi
}

############################################################
# git-findcommitbycontent: find commit adding or removing given string. #
############################################################
function git-findcommitbycontent() {
  if [ -z "$1" ];
    then
      echo "findcommitbycontent needs a string to find a matching commit with."
    else
      git log -S$1
  fi
}

#################################################################
# git-restoredeletedfile: restore given file from given commit. #
#################################################################
function git-restoredeletedfile() {
  if [ -z "$1" || -z "$2" ];
    then
      echo "restoredeletedfile needs a commit hash and the deleted file to restore."
    else
      git checkout $1~1 $2
  fi
}

####################################################################################
# remindme: to remind yourself of an alias (given some part of it), or all aliases #
####################################################################################
function remindme() {
  if [ -z "$1" ];
    then
      cat "$BASH_SRC_PATH"/.aliases*
    else
      /usr/bin/grep -i -h -a1 $@ "$BASH_SRC_PATH"/.aliases* | grep -v '^\s*$' ;
  fi
}
